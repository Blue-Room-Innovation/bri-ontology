## NOTE: Archivo renombrado desde dpp-shapes.ttl. Contenido legado (DPP) pendiente de migración a Waste / MARPOL.
@prefix dpp:     <https://example.org/dpp#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .
@prefix sh:      <http://www.w3.org/ns/shacl#> .
@prefix dct:     <http://purl.org/dc/terms/> .
@prefix schema:  <http://schema.org/> .
@prefix adms:    <http://www.w3.org/ns/adms#> .
@prefix prov:    <http://www.w3.org/ns/prov#> .
@prefix qudt:    <http://qudt.org/schema/qudt/> .
@prefix untpdpp: <https://test.uncefact.org/vocabulary/untp/dpp/0/> .
@prefix untpcore:<https://test.uncefact.org/vocabulary/untp/core/0/> .
@prefix epcis:   <https://ref.gs1.org/epcis/> .
@prefix cbv:     <https://ref.gs1.org/cbv/> .

dpp:DigitalProductPassportShape a sh:NodeShape ;
  sh:targetClass dpp:DigitalProductPassport ;
  sh:name "DPP: Pasaporte Digital"@es ;
  sh:property [ sh:path dpp:describesProduct ; sh:name "Describe producto"@es ; sh:minCount 0 ; sh:class dpp:Product ] ;
  sh:or ( [ sh:property [ sh:path dpp:describesProduct ; sh:minCount 1 ; sh:class dpp:Product ] ] [ sh:property [ sh:path untpcore:product ; sh:minCount 1 ] ] ) ;
  sh:property [ sh:path dct:conformsTo ; sh:name "Conforma a (norma/estándar)"@es ; sh:minCount 1 ] ;
  sh:property [ sh:path dct:issued ; sh:name "Fecha de emisión"@es ; sh:datatype xsd:dateTime ; sh:minCount 1 ] ;
  sh:or ( [ sh:property [ sh:path adms:identifier ; sh:minCount 1 ; sh:nodeKind sh:BlankNodeOrIRI ; sh:class dpp:Identifier ] ] [ sh:property [ sh:path dct:identifier ; sh:minCount 1 ] ] ) .

dpp:ProductShape a sh:NodeShape ;
  sh:targetClass dpp:Product ;
  sh:name "DPP: Producto"@es ;
  sh:property [ sh:path schema:name ; sh:name "Nombre"@es ; sh:minCount 1 ; sh:datatype xsd:string ] ;
  sh:property [ sh:path adms:identifier ; sh:name "Identificador gestionado"@es ; sh:minCount 0 ; sh:class dpp:Identifier ] ;
  sh:or ( [ sh:property [ sh:path adms:identifier ; sh:minCount 1 ] ] [ sh:property [ sh:path untpcore:serialNumber ; sh:minCount 1 ] ] [ sh:property [ sh:path dct:identifier ; sh:minCount 1 ] ] ) ;
  sh:property [ sh:path dpp:manufacturer ; sh:name "Fabricante"@es ; sh:minCount 0 ; sh:class dpp:Organization ] ;
  sh:or ( [ sh:property [ sh:path dpp:manufacturer ; sh:minCount 1 ] ] [ sh:property [ sh:path untpcore:producedByParty ; sh:minCount 1 ] ] ) ;
  sh:property [ sh:path dpp:hasComponent ; sh:name "Componentes"@es ; sh:class dpp:Component ] ;
  sh:property [ sh:path dpp:hasMaterial ; sh:name "Materiales"@es ; sh:class dpp:Material ] .

dpp:ComponentShape a sh:NodeShape ; sh:targetClass dpp:Component ; sh:name "DPP: Componente"@es ;
  sh:property [ sh:path schema:name ; sh:minCount 1 ; sh:datatype xsd:string ] ;
  sh:property [ sh:path adms:identifier ; sh:minCount 1 ; sh:class dpp:Identifier ] .

dpp:OrganizationShape a sh:NodeShape ; sh:targetClass dpp:Organization ; sh:name "DPP: Organización"@es ;
  sh:or ( [ sh:property [ sh:path schema:legalName ; sh:minCount 1 ; sh:datatype xsd:string ] ] [ sh:property [ sh:path schema:name ; sh:minCount 1 ; sh:datatype xsd:string ] ] ) ;
  sh:property [ sh:path adms:identifier ; sh:minCount 1 ; sh:class dpp:Identifier ] .

dpp:IdentifierShape a sh:NodeShape ; sh:targetClass dpp:Identifier ; sh:name "DPP: Identificador"@es ;
  sh:or ( [ sh:property [ sh:path dpp:gtin ; sh:minCount 1 ; sh:datatype xsd:string ] ] [ sh:property [ sh:path dpp:serialNumber ; sh:minCount 1 ; sh:datatype xsd:string ] ] [ sh:property [ sh:path dpp:mpn ; sh:minCount 1 ; sh:datatype xsd:string ] ] [ sh:property [ sh:path dct:identifier ; sh:minCount 1 ; sh:datatype xsd:string ] ] ) .

dpp:LifecycleEventShape a sh:NodeShape ; sh:targetClass dpp:LifecycleEvent ; sh:name "DPP: Evento de Ciclo de Vida"@es ;
  sh:or ( [ sh:property [ sh:path prov:startedAtTime ; sh:minCount 1 ; sh:datatype xsd:dateTime ] ] [ sh:property [ sh:path dpp:eventTime ; sh:minCount 1 ; sh:datatype xsd:dateTime ] ] ) ;
  sh:property [ sh:path prov:endedAtTime ; sh:minCount 0 ; sh:datatype xsd:dateTime ] ;
  sh:property [ sh:path prov:wasAssociatedWith ; sh:minCount 0 ; sh:nodeKind sh:IRI ] .

dpp:MeasurementShape a sh:NodeShape ; sh:targetClass dpp:Measurement ; sh:name "DPP: Medición"@es ;
  sh:property [ sh:path qudt:numericValue ; sh:minCount 1 ; sh:datatype xsd:decimal ] ;
  sh:property [ sh:path qudt:unit ; sh:minCount 1 ; sh:nodeKind sh:IRI ] .

dpp:FacilityShape a sh:NodeShape ; sh:targetClass dpp:Facility ; sh:name "DPP: Instalación"@es ;
  sh:property [ sh:path schema:name ; sh:minCount 1 ; sh:datatype xsd:string ] ;
  sh:property [ sh:path adms:identifier ; sh:minCount 0 ] .

dpp:MaterialProvenanceShape a sh:NodeShape ; sh:targetClass dpp:MaterialProvenance ; sh:name "DPP: Proveniencia de Material"@es ;
  sh:property [ sh:path dpp:materialType ; sh:minCount 1 ; sh:nodeKind sh:IRI ] ;
  sh:property [ sh:path dpp:originCountry ; sh:minCount 1 ; sh:nodeKind sh:IRI ] ;
  sh:property [ sh:path dpp:massFraction ; sh:minCount 0 ; sh:datatype xsd:decimal ] ;
  sh:property [ sh:path dpp:recycledMassFraction ; sh:minCount 0 ; sh:datatype xsd:decimal ] ;
  sh:property [ sh:path dpp:mass ; sh:minCount 0 ; sh:node dpp:MeasurementShape ] ;
  sh:property [ sh:path dpp:hazardous ; sh:minCount 0 ; sh:datatype xsd:boolean ] ;
  sh:property [ sh:path dpp:symbol ; sh:minCount 0 ; sh:datatype xsd:string ] ;
  sh:property [ sh:path dpp:materialSafetyInformation ; sh:minCount 0 ] .

dpp:EmissionsScorecardShape a sh:NodeShape ; sh:targetClass dpp:EmissionsScorecard ; sh:name "DPP: Emisiones (scorecard)"@es ;
  sh:property [ sh:path dpp:carbonFootprint ; sh:minCount 1 ; sh:datatype xsd:decimal ] ;
  sh:property [ sh:path dpp:declaredUnit ; sh:minCount 1 ; sh:nodeKind sh:IRI ] ;
  sh:property [ sh:path dpp:operationalScope ; sh:minCount 0 ; sh:nodeKind sh:IRI ] ;
  sh:property [ sh:path dpp:primarySourcedRatio ; sh:minCount 0 ; sh:datatype xsd:decimal ] ;
  sh:property [ sh:path dpp:reportingStandard ; sh:minCount 0 ] .

dpp:CircularityScorecardShape a sh:NodeShape ; sh:targetClass dpp:CircularityScorecard ; sh:name "DPP: Circularidad (scorecard)"@es ;
  sh:property [ sh:path dpp:recyclableContent ; sh:minCount 0 ; sh:datatype xsd:decimal ] ;
  sh:property [ sh:path dpp:recycledContent ; sh:minCount 0 ; sh:datatype xsd:decimal ] ;
  sh:property [ sh:path dpp:utilityFactor ; sh:minCount 0 ; sh:datatype xsd:decimal ] ;
  sh:property [ sh:path dpp:materialCircularityIndicator ; sh:minCount 0 ; sh:datatype xsd:decimal ] .

dpp:TraceabilityInformationShape a sh:NodeShape ; sh:targetClass dpp:TraceabilityInformation ; sh:name "DPP: Trazabilidad"@es ;
  sh:property [ sh:path dpp:valueChainProcess ; sh:minCount 0 ; sh:datatype xsd:string ] ;
  sh:property [ sh:path dpp:verifiedRatio ; sh:minCount 0 ; sh:datatype xsd:decimal ] ;
  sh:property [ sh:path dpp:traceabilityEvent ; sh:minCount 0 ] ;
  sh:property [ sh:path dpp:hasEPCISEvent ; sh:minCount 0 ; sh:node dpp:EPCISEventShape ] .

dpp:ProductPassportShape a sh:NodeShape ; sh:targetClass dpp:ProductPassport ; sh:name "DPP: ProductPassport"@es ;
  sh:property [ sh:path dct:conformsTo ; sh:minCount 1 ] ;
  sh:or ( [ sh:property [ sh:path dpp:describesProduct ; sh:minCount 1 ] ] [ sh:property [ sh:path untpcore:product ; sh:minCount 1 ] ] ) ;
  sh:property [ sh:path dpp:emissionsScorecard ; sh:minCount 0 ; sh:node dpp:EmissionsScorecardShape ] ;
  sh:property [ sh:path dpp:circularityScorecard ; sh:minCount 0 ; sh:node dpp:CircularityScorecardShape ] ;
  sh:property [ sh:path dpp:traceabilityInformation ; sh:minCount 0 ; sh:node dpp:TraceabilityInformationShape ] ;
  sh:property [ sh:path dpp:conformityClaim ; sh:minCount 0 ] ;
  sh:property [ sh:path dpp:dueDiligenceDeclaration ; sh:minCount 0 ] .

dpp:ProductShape
  sh:property [ sh:path dpp:producedAtFacility ; sh:minCount 0 ; sh:class dpp:Facility ] ;
  sh:property [ sh:path dpp:productionDate ; sh:minCount 0 ] ;
  sh:property [ sh:path dpp:weight ; sh:minCount 0 ; sh:node dpp:MeasurementShape ] ;
  sh:property [ sh:path dpp:length ; sh:minCount 0 ; sh:node dpp:MeasurementShape ] ;
  sh:property [ sh:path dpp:width ; sh:minCount 0 ; sh:node dpp:MeasurementShape ] ;
  sh:property [ sh:path dpp:height ; sh:minCount 0 ; sh:node dpp:MeasurementShape ] ;
  sh:property [ sh:path dpp:volume ; sh:minCount 0 ; sh:node dpp:MeasurementShape ] ;
  sh:property [ sh:path dpp:hasMaterialProvenance ; sh:minCount 0 ; sh:node dpp:MaterialProvenanceShape ] .

dpp:EPCISEventShape a sh:NodeShape ; sh:targetClass dpp:EPCISEvent ; sh:name "DPP: EPCIS Event"@es ;
  sh:property [ sh:path dpp:eventTime ; sh:minCount 1 ; sh:datatype xsd:dateTime ] ;
  sh:property [ sh:path dpp:eventTimeZoneOffset ; sh:minCount 0 ; sh:datatype xsd:string ] ;
  sh:property [ sh:path dpp:bizStep ; sh:minCount 1 ; sh:nodeKind sh:IRI ] ;
  sh:property [ sh:path dpp:disposition ; sh:minCount 0 ; sh:nodeKind sh:IRI ] ;
  sh:property [ sh:path dpp:bizLocation ; sh:minCount 0 ] ;
  sh:property [ sh:path dpp:readPoint ; sh:minCount 0 ] .

dpp:ObjectEventShape a sh:NodeShape ; sh:targetClass dpp:ObjectEvent ; sh:name "DPP: EPCIS ObjectEvent"@es ; sh:node dpp:EPCISEventShape ;
  sh:property [ sh:path dpp:epc ; sh:minCount 1 ; sh:nodeKind sh:IRI ] .

dpp:AggregationEventShape a sh:NodeShape ; sh:targetClass dpp:AggregationEvent ; sh:name "DPP: EPCIS AggregationEvent"@es ; sh:node dpp:EPCISEventShape ;
  sh:property [ sh:path dpp:childEpc ; sh:minCount 1 ; sh:nodeKind sh:IRI ] ;
  sh:property [ sh:path dpp:parentEpc ; sh:minCount 0 ; sh:nodeKind sh:IRI ] .

dpp:TransformationEventShape a sh:NodeShape ; sh:targetClass dpp:TransformationEvent ; sh:name "DPP: EPCIS TransformationEvent"@es ; sh:node dpp:EPCISEventShape ;
  sh:or ( [ sh:property [ sh:path dpp:inputEpc ; sh:minCount 1 ; sh:nodeKind sh:IRI ] ] [ sh:property [ sh:path dpp:outputEpc ; sh:minCount 1 ; sh:nodeKind sh:IRI ] ] ) .

dpp:TransactionEventShape a sh:NodeShape ; sh:targetClass dpp:TransactionEvent ; sh:name "DPP: EPCIS TransactionEvent"@es ; sh:node dpp:EPCISEventShape ;
  sh:property [ sh:path dpp:bizTransaction ; sh:minCount 1 ; sh:nodeKind sh:IRI ] .