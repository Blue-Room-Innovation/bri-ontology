@prefix dct: <http://purl.org/dc/terms/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema: <http://schema.org/> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix untp: <https://test.uncefact.org/vocabulary/untp/dpp/0/> .
@prefix untp-core: <https://test.uncefact.org/vocabulary/untp/core/0/> .
@prefix vc: <https://www.w3.org/2018/credentials#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix geojson: <https://purl.org/geojson/vocab#> .


untp:DigitalProductPassportShape
  a sh:NodeShape ;
  sh:targetClass untp:DigitalProductPassport ;
  sh:closed false ;   # OPEN BY DESIGN (see governance notes above)

  # id (JSON Schema: "id", format: uri)
  sh:property [
    sh:path untp-core:id ;
    sh:datatype xsd:anyURI ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  # issuer (JSON Schema: issuer)
  sh:property [
    sh:path untp-core:CredentialIssuer ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:node untp:CredentialIssuerShape ;
  ] ;

  # validFrom / validUntil
  sh:property [
    sh:path untp-core:validFrom ;
    sh:datatype schema:DateTime ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:validUntil ;
    sh:datatype schema:dateTime ;
    sh:maxCount 1 ;
  ] ;

  # credentialSubject
  sh:property [
    sh:path vc:credentialSubject ;
    sh:class untp:Product ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:node untp:ProductShape ;
  ] .

untp:CredentialIssuerShape
  a sh:NodeShape ;
  sh:targetClass untp-core:CredentialIssuer ;
  sh:closed false ;

  sh:property [
    sh:path untp-core:id ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:issuerAlsoKnownAs ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
    sh:node untp:PartyShape ;
  ] ;

  sh:property [
    sh:path untp-core:name ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .


untp:PartyShape
  a sh:NodeShape ;
  sh:closed true ;

  sh:property [
    sh:path untp-core:description ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:id ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:idScheme ;
    sh:node untp-core:IdentifierSchemeShape ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:industryCategory ;
    sh:node untp-core:ClassificationShape ;
    sh:minCount 0 ;
  ] ;

  sh:property [
    sh:path untp-core:name ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:organisationWebsite ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:partyAlsoKnownAs ;
    sh:node untp-core:PartyShape ;
    sh:minCount 0 ;
    sh:description "An optional list of other parties this party is also known as." ;
  ] ;

  sh:property [
    sh:path untp-core:registeredId ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
    sh:description "The registration number (alphanumeric) of the party." ;
  ] ;

  sh:property [
    sh:path untp-core:registrationCountry ;
    sh:datatype untp-core:countryCode ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
    sh:description "The country in which the party is registered." ;
  ] .

untp-core:IdentifierSchemeShape
  a sh:NodeShape ;
  sh:closed true ;

  sh:property [
    sh:path untp-core:id ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:name ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

untp-core:ClassificationShape
  a sh:NodeShape ;
  sh:closed true ;

  sh:property [
    sh:path untp-core:code ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:id ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:name ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:schemeID ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:schemeName ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

untp:ProductPassportShape
  a sh:NodeShape ;
  sh:closed false ;

  sh:property [
    sh:path untp:product ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:node untp:ProductShape ;
  ] ;

  sh:property [
    sh:path untp:granularityLevel ;
    sh:datatype xsd:string ;
    sh:in ( "item" "batch" "model" ) ;
    sh:maxCount 1 ;
  ] .

untp:ProductShape
  a sh:NodeShape ;
  sh:closed false ;

  sh:property [
    sh:path untp-core:batchNumber ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:characteristics ;
    sh:node untp-core:CharacteristicsShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:countryOfProduction ;
    sh:datatype untp-core:countryCode ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:description ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:dimensions ;
    sh:node untp-core:DimensionShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:furtherInformation ;
    sh:node untp-core:LinkShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:id ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:idScheme ;
    sh:node untp-core:IdentifierSchemeShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:name ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:producedAtFacility ;
    sh:node untp-core:FacilityShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:producedByParty ;
    sh:node untp-core:PartyShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:productCategory ;
    sh:node untp-core:ClassificationShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:productImage ;
    sh:node untp-core:LinkShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:productionDate ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:registeredId ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:serialNumber ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] .


untp-core:CharacteristicsShape
  a sh:NodeShape ;
  sh:closed false .


untp-core:DimensionShape
  a sh:NodeShape ;
  sh:closed false ;

  sh:property [
    sh:path untp-core:height ;
    sh:node untp-core:MeasureShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:length ;
    sh:node untp-core:MeasureShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:volume ;
    sh:node untp-core:MeasureShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:weight ;
    sh:node untp-core:MeasureShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:width ;
    sh:node untp-core:MeasureShape ;
    sh:maxCount 1 ;
  ] .


untp-core:MeasureShape
  a sh:NodeShape ;
  sh:closed false ;

  sh:property [
    sh:path untp-core:unit ;
    sh:datatype untp-core:unitOfMeasure ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:value ;
    sh:datatype xsd:double ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

untp-core:LinkShape
  a sh:NodeShape ;
  sh:closed false ;

  sh:property [
    sh:path untp-core:linkName ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:linkType ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:linkURL ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

untp-core:FacilityShape
  a sh:NodeShape ;
  sh:closed false ;

  sh:property [
    sh:path untp-core:address ;
    sh:node untp-core:AddressShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:countryOfOperation ;
    sh:datatype untp-core:countryCode ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:description ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:facilityAlsoKnownAs ;
    sh:node untp-core:FacilityShape ;
  ] ;

  sh:property [
    sh:path untp-core:id ;
    sh:datatype xsd:string ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:idScheme ;
    sh:node untp-core:IdentifierSchemeShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:locationInformation ;
    sh:node untp-core:LocationShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:name ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:operatedByParty ;
    sh:node untp-core:PartyShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:processCategory ;
    sh:node untp-core:ClassificationShape ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:registeredId ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] .

untp-core:AddressShape
  a sh:NodeShape ;
  sh:closed false ;

  sh:property [
    sh:path untp-core:addressCountry ;
    sh:datatype untp-core:countryCode ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:addressLocality ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:addressRegion ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:postalCode ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:streetAddress ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] .


untp-core:LocationShape
  a sh:NodeShape ;
  sh:closed false ;

  sh:property [
    sh:path untp-core:geoBoundary ;
    sh:datatype geojson:appendix-A.3 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:geoLocation ;
    sh:datatype geojson:appendix-A.1 ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path untp-core:plusCode ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] .
