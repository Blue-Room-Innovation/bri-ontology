#######################################################################
# Digital Waste Passport – SHACL BOOTSTRAP
#
# SOURCE
# ------
# This SHACL file is a BOOTSTRAP profile for the Digital Waste Passport
# (DWP). Unlike the DPP bootstrap, this file is NOT derived from an
# official UNECE JSON Schema, but it follows the SAME ARCHITECTURAL
# PATTERN used for the DPP bootstrap.
#
# It is aligned with:
#   - UNECE UNTP core vocabularies
#   - The Digital Waste Passport ontology
#
# PURPOSE
# -------
# This file provides an INITIAL STRUCTURAL SHACL PROFILE that:
#   - Defines the minimal expected structure of a Digital Waste Passport
#   - Enables early graph-level validation of JSON-LD instances
#   - Acts as a stable extension point for governed and regulatory profiles
#
# IMPORTANT LIMITATIONS
# ---------------------
# - This file is NOT a governed profile
# - This file MUST NOT contain business, regulatory or domain rules
# - This file MUST remain OPEN to allow extension
# - This file is NOT the semantic source of truth
#
# GOVERNANCE RULE
# ---------------
# - THIS FILE IS IMMUTABLE
# - Any additional constraints MUST be defined in:
#     • dwp-governed.shacl.ttl
#     • regulatory or sector-specific profiles (e.g. MARPOL)
#
# DESIGN PRINCIPLE
# ----------------
# - Shapes in this file are intentionally LEFT OPEN (sh:closed false)
# - Closure is applied only in governed or regulatory layers
#
#######################################################################

@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .
@prefix sh:      <http://www.w3.org/ns/shacl#> .
@prefix dct:     <http://purl.org/dc/terms/> .

@prefix unece:   <https://test.uncefact.org/vocabulary/untp/core/0/> .
@prefix dwp:     <https://blue-room-innovation.github.io/bri-ontology/ontology/v0.1/digitalWastePassport.ttl#> .

#######################################################################
# Digital Waste Passport (top-level wrapper)
#######################################################################

dwp:DigitalWastePassportShape
  a sh:NodeShape ;
  sh:targetClass dwp:DigitalWastePassport ;

  # OPEN BY DESIGN
  # This allows governed and regulatory profiles to extend the model
  sh:closed false ;

  ###################################################################
  # Issuance metadata
  # (kept minimal and generic at bootstrap level)
  ###################################################################

  sh:property [
    sh:path dct:issued ;
    sh:datatype xsd:dateTime ;
    sh:maxCount 1 ;
  ] ;

  sh:property [
    sh:path dct:publisher ;
    sh:maxCount 1 ;
  ] ;

  ###################################################################
  # Credential subject
  #
  # NOTE:
  # The specific nature of the credential subject (e.g. WastePassport,
  # MARPOL Waste Passport, national profiles, etc.) is intentionally
  # NOT constrained here.
  ###################################################################

  sh:property [
    sh:path dwp:credentialSubject ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

#######################################################################
# Waste Passport (generic container)
#######################################################################

dwp:WastePassportShape
  a sh:NodeShape ;
  sh:targetClass dwp:WastePassport ;

  # OPEN BY DESIGN
  sh:closed false ;

  ###################################################################
  # Waste reference
  #
  # NOTE:
  # The concrete waste model (UNECE-aligned, MARPOL-specific, etc.)
  # is intentionally left unconstrained at bootstrap level.
  ###################################################################

  sh:property [
    sh:path dwp:waste ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

#######################################################################
# Waste (generic placeholder)
#######################################################################

dwp:WasteShape
  a sh:NodeShape ;
  sh:targetClass dwp:Waste ;

  # OPEN BY DESIGN
  sh:closed false ;

  ###################################################################
  # Minimal alignment with UNECE core concepts
  # (No mandatory constraints at bootstrap level)
  ###################################################################

  sh:property [
    sh:path unece:name ;
    sh:datatype xsd:string ;
    sh:maxCount 1 ;
  ] .
